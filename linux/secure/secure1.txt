

隐藏服务器版本：
    mv /etc/issue /etc/system.bak
    mv /etc/issue.net /etc/system.netbak
远程登陆优化
        sed -i '38a PermitRootLogin no ' /etc/ssh/sshd_config
        sed -i '38a UseDNS no ' /etc/ssh/sshd_config
        sed -i '38a MaxAuthTries 3' /etc/ssh/sshd_config
添加自定义用户并设置密码/自定义目录
下载：基础依赖包，数据库备份包，常用包，提供服务包
防火墙：建立黑白名单，关闭多余的端口，禁ping
优化环境：
	export TMOUT=600 终端退出时间  
	HISTSIZE=1000
	export HISTTIMEFORMAT="%F %T"

安全
firewalld
/etc/hosts.deny
/etc/sudoers  
/etc/ssh/sshd_config
/etc/issue、/etc/issue.net 来控制本地及远程登录前的信息显示
/etc/motd    登陆后的信息显示

linux下设置密码复杂度限制:
/etc/login.defs        /etc/pam.d/system-auth


异常用户
 w（/var/run/utmp）
 who /var/log/wtmp
 /var/log/message
 /var/log/secure
 history
 last：记录的登录系统的用户名单及是否在线(/var/log/wtmp) 
 lastb：记录的登入系统失败的用户名单(/var/log/btmp)
 lastlog
 

find   被攻击的时候可以看创建了什么文件
find / -u nobody -iname test.txt -size +100k -mtime +4/4 -type s -perm +7000 -exec ls -l {} \;

chmod chown
umask
setfacl -m u:master:rxw pub/
chattr
	A  ：当配置了 A 这个属性时，若你有存取此文件(或目录)时，他的存取时间 atime将不会被修改，可避免I/O较慢的机器过度的存取磁碟。这对速度较慢的计算机有帮助
	S  ：一般文件是非同步写入磁碟的，如果加上 S 这个属性时，当你进行任何文件的修改，该更动会『同步』写入磁碟中。
	a  ：当配置 a 之后，这个文件将只能添加数据，而不能删除也不能修改数据，只有root 才能配置这个属性。 
	c  ：这个属性配置之后，将会自动的将此文件『压缩』，在读取的时候将会自动解压缩，但是在储存的时候，将会先进行压缩后再储存(看来对於大文件似乎蛮有用的！)
	d  ：当 dump 程序被运行的时候，配置 d 属性将可使该文件(或目录)不会被 dump 备份
	i  ：这个 i 可就很厉害了！他可以让一个文件『不能被删除、改名、配置连结也无法写入或新增数据！』对於系统安全性有相当大的助益！只有 root 能配置此属性
	s  ：当文件配置了 s 属性时，如果这个文件被删除，他将会被完全的移除出这个硬盘空间，所以如果误删了，完全无法救回来了喔！
	u  ：与 s 相反的，当使用 u 来配置文件时，如果该文件被删除了，则数据内容其实还存在磁碟中，可以使用来救援该文件喔！

SUID 权限仅对二进位程序(binary program)有效；运行者对於该程序需要具有 x 的可运行权限；运行者将具有该程序拥有者 (owner) 的权限。(passwd)
sgid 使得在该目录内创建的文件/目录，不属于创建者所属的组，而是属于父目录所属的组(所有者还是创建者) 常用于共享
SBIT 目录中的所有文件只能由其所有者删除或移动

cd 等变换工作目录的命令,目录所需权限：使用者对这个目录至少需要具有 x 的权限,如果使用者想要在这个目录内利用 ls 查阅档名，则使用者对此目录还需要 r 的权限。 
可执行的命令,使用者对这个目录至少需要具有 x 权限；使用者对文件至少需要具有 r 的权限才行！（进去读）
编辑文件，使用者在该文件所在的目录至少要有 x 权限；使用者对该文件至少要有 r, w 权限
创建一个文件,使用者在该目录要具有 w,x 的权限，重点在 w 啦！
 
异常命令：将排查的命令 ls ps netstat last w ..做个MD5值校验






